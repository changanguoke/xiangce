<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <style>
        /* 页面基础样式 */
        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(45deg, #1a1a1a, #2d2d2d);
            overflow-y: auto; /* 允许页面纵向滚动 */
            padding: 0; /* 移除内边距 */
            }

        /* 星空背景效果 */
        .stars {
            position: fixed; /* 改为固定定位 */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            animation: twinkle 3s infinite;
            pointer-events: none;
        }
        .stars::before {
            content: '';
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            box-shadow: 100px 200px white, 
                        250px 150px white,
                        400px 300px white;
            animation: moveStars 50s linear infinite;
        }

        /* 雪花背景效果 */
        .snowflakes {
            position: fixed; /* 改为固定定位 */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .snowflake {
            position: absolute;
            color: #fff;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
            z-index: 1;
            pointer-events: none;
            animation: fall linear infinite;  /* 修改为无限循环动画 */
        }
        
        @keyframes fall {
            0% {
                opacity: 0;
                transform: translateY(-20px) rotate(0deg);
            }
            20% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* 相册首页样式 */
        .album-home {
            position: relative; /* 改为相对定位 */
            width: 80%;
            max-width: 1200px;
            margin: 50px auto; /* 添加上下外边距 */
            padding: 20px;
            text-align: center;
            color: white;
            min-height: 100vh; /* 确保最小高度为视口高度 */
            overflow-y: auto; /* 允许纵向滚动 */
        }
        .album-home h1 {
            font-size: 3em;
            margin-bottom: 20px;
        }
        .album-home .thumbnails {
            display: grid; /* 使用网格布局 */
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* 响应式网格 */
            gap: 20px;
            padding: 20px;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        .album-home .thumbnails img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .album-home .thumbnails img:hover {
            transform: scale(1.1);
        }

        /* 图片移动容器 */
        .gallery-container {
            position: fixed; /* 改为固定定位 */
            top: 50%; /* 垂直居中 */
            left: 50%; /* 水平居中 */
            transform: translate(-50%, -50%); /* 完全居中 */
            width: 80vw;
            height: 40vh;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.4);
            display: none;
            z-index: 10; /* 确保在其他元素上方 */
        }

        /* 图片轨道 */
        .image-track {
            display: flex;
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            gap: 4vw;
            padding: 0 50%; /* 添加左右内边距 */
            animation: slide 30s linear infinite; /* 修复动画持续时间 */
        }

        /* 单张图片样式 */
        .image-item {
            width: 30vw;
            height: 20vh;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer; /* 添加鼠标指针样式 */
        }

        /* 控制按钮样式 */
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none; /* 默认隐藏 */
            gap: 10px;
            z-index: 100;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center; /* 确保所有按钮垂直对齐 */
        }
        .controls button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        /* 返回按钮样式 */
        .back-button {
            position: static; /* 移除固定定位 */
            top: auto;
            left: auto;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            backdrop-filter: blur(5px);
            z-index: 100;
        }

        /* 动画定义 */
        @keyframes slide {
            0% { 
                transform: translateY(-50%) translateX(0);
            }
            100% { 
                transform: translateY(-50%) translateX(calc(-50% - 4vw)); /* 修改移动距离 */
            }
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        @keyframes moveStars {
            100% { transform: translate(-100vw, -100vh); }
        }

        /* 悬停效果 */
        .image-item:hover {
            transform: scale(1.05) rotate(2deg);
            z-index: 10;
        }

        /* 放大图片样式 */
        .image-item.enlarged {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.5); /* 改为放大50% */
            z-index: 1000;
            transition: transform 0.3s;
        }

        /* 移动端适配 */
        @media (max-width: 768px) {
            .album-home h1 {
                font-size: 2em;
            }
            .album-home .thumbnails img {
                width: 100px;
                height: 75px;
            }
            .gallery-container {
                width: 90vw;
                height: 30vh;
            }
            .image-item {
                width: 40vw;
                height: 25vh;
            }
            .controls {
                flex-direction: row; /* 保持水平排列 */
                padding: 0 10px;
            }
            .controls button {
                padding: 5px 10px;
                font-size: 0.9rem;
            }
            .back-button {
                padding: 5px 10px;
            }
            /* 修改弹出层中的媒体容器布局 */
            .mediaContainer {
                flex-direction: column !important; /* 强制改为垂直布局 */
                gap: 10px !important;
            }

            /* 修改图片和视频容器的宽度 */
            [class*="Container"] > div {
                width: 100% !important; /* 强制占满容器宽度 */
            }

            /* 调整视频播放器大小 */
            video {
                width: 100%;
                height: auto;
                max-height: 40vh;
                object-fit: contain;
            }

            video {
                pointer-events: none; /* 禁用视频点击事件 */
            }
        }

        /* 进一步适配更小屏幕 */
        @media (max-width: 480px) {
            .album-home h1 {
                font-size: 1.5em;
            }
            .album-home .thumbnails img {
                width: 80px;
                height: 60px;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
            }
            .gallery-container {
                width: 95vw;
                height: 25vh;
            }
            .image-item {
                width: 15vw;
                height: 10vh;
            }
            .controls button {
                padding: 3px 5px;
                font-size: 0.8em;
            }
            .back-button {
                padding: 3px 5px;
                font-size: 0.8em;
            }
            video {
                max-height: 35vh !important;
            }
        }
 
        /* 基础响应式设置 */
        html {
            font-size: 16px; /* 基准字体大小 */
        }

        @media screen and (max-width: 1200px) {
            html {
                font-size: 15px;
            }
        }

        @media screen and (max-width: 992px) {
            html {
                font-size: 14px;
            }
        }

        /* 平板设备适配 */
        @media screen and (max-width: 768px) {
            html {
                font-size: 13px;
            }
            
            .album-home {
                width: 90%;
                top: 5%;
            }
            
            .album-home h1 {
                font-size: 2rem;
            }
            
            .album-home .thumbnails {
                gap: 10px;
            }
            
            .album-home .thumbnails img {
                width: calc(50% - 10px); /* 每行两张图片 */
                height: auto;
                aspect-ratio: 3/2;
            }
            
            .gallery-container {
                width: 95vw;
                height: 50vh;
            }
            
            .image-item {
                width: 40vw;
                height: 25vh;
            }
        }

        /* 手机设备适配 */
        @media screen and (max-width: 480px) {
            html {
                font-size: 12px;
            }
            
            .album-home h1 {
                font-size: 1.8rem;
                margin-bottom: 1rem;
            }
            
            .album-home .thumbnails {
                gap: 5px;
            }
            
            .album-home .thumbnails img {
                width: calc(100% - 10px); /* 每行一张图片 */
                height: auto;
                aspect-ratio: 3/2;
            }
            
            .controls {
                bottom: 10px;
                flex-wrap: wrap;
                justify-content: center;
                padding: 0 10px;
            }
            
            .controls button {
                font-size: 0.9rem;
                padding: 0.5rem 1rem;
                margin: 2px;
            }
            
            .back-button {
                top: 10px;
                left: 10px;
                font-size: 0.9rem;
                padding: 0.5rem 1rem;
            }
        }

        /* 小型手机设备适配 */
        @media screen and (max-width: 320px) {
            html {
                font-size: 11px;
            }
            
            .controls button {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }
        }

        /* 触摸设备优化 */
        @media (hover: none) {
            .image-item:hover {
                transform: none; /* 移除悬停效果 */
            }
            
            .controls button {
                padding: 0.8rem 1.2rem; /* 增大触摸区域 */
            }
        }

        /* 横屏模式适配 */
        @media screen and (orientation: landscape) and (max-height: 500px) {
            .gallery-container {
                height: 70vh;
            }
            
            .album-home {
                top: 5%;
            }
            
            .controls {
                bottom: 5px;
            }
        }

        /* 音乐播放器容器样式 */
        .music-player {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.6);
            padding: 5px;
            border-radius: 5px;
            display: none;
            z-index: 2;
        }

        .image-item-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 2vw;
            padding-bottom: 70px;
        }

        .image-item-container:hover .music-player {
            display: block;
        }

        .music-player audio {
            width: 350px;
            height: 45px;
        }

        @media (max-width: 768px) {
            .music-player audio {
                width: 150px;
                height: 25px;
            }
        }

        /* 修改桌面端的基础布局 */
        @media screen and (min-width: 1000px) {
            .album-home {
                width: 80%;
                max-width: 1000px;
                top: 15%;
            }
            
            .album-home h1 {
                font-size: 4rem;
                margin-bottom: 3rem;
            }
            
            .album-home .thumbnails {
                gap: 30px;
                max-width: 1000px;
                margin: 0 auto;
            }
            
            .album-home .thumbnails img {
                width: 200px;
                height: 150px;
                transition: transform 0.3s ease;
            }
            
            .gallery-container {
                width: 90vw;
                max-width: 1400px;
                height: 60vh;
                margin: 0 auto;
            }
            
            .image-track {
                gap: 40px;
            }
            
            .image-item {
                width: 400px;
                height: 300px;
            }
            
            .controls {
                bottom: 40px;
                gap: 20px;
            }
            
            .controls button {
                padding: 15px 30px;
                font-size: 1.2rem;
                transition: all 0.3s ease;
            }
            
            .controls button:hover {
                background: rgba(255,255,255,0.2);
                transform: translateY(-2px);
            }
            
            .music-player {
                bottom: 20px;
            }
            
            .music-player audio {
                width: 300px;
                height: 40px;
            }
        }

        /* 大屏幕显示器适配 */
        @media screen and (min-width: 1600px) {
            .album-home {
                max-width: 1400px;
            }
            
            .album-home .thumbnails img {
                width: 250px;
                height: 180px;
            }
            
            .gallery-container {
                max-width: 1600px;
                height: 70vh;
            }
            
            .image-item {
                width: 500px;
                height: 350px;
            }
        }

        /* 优化图片悬停效果 */
        @media screen and (min-width: 1200px) {
            .album-home .thumbnails img:hover {
                transform: scale(1.15);
                box-shadow: 0 10px 20px rgba(0,0,0,0.3);
                z-index: 2;
            }
            
            .image-item:hover {
                transform: scale(1.1) rotate(3deg);
                box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            }
        }

        /* 优化音乐播放器在桌面端的显示 */
        @media screen and (min-width: 1000px) {
            .music-player {
                position: absolute;
                bottom: -60px; /* 调整位置，使其位于图片下方 */
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.6);
                padding: 10px;
                border-radius: 10px;
                transition: opacity 0.3s ease;
                opacity: 0;
            }
            
            .image-item-container {
                padding-bottom: 70px; /* 为音乐播放器预留空间 */
                margin-bottom: 20px; /* 增加容器间距 */
            }
            
            .image-item-container:hover .music-player {
                opacity: 1;
            }
            
            .music-player audio {
                width: 300px;
                height: 40px;
            }
        }

        /* 大屏幕显示器额外优化 */
        @media screen and (min-width: 1600px) {
            .music-player {
                bottom: -70px; /* 大屏幕下调整位置 */
            }
            
            .image-item-container {
                padding-bottom: 70px;
            }
            
            .music-player audio {
                width: 350px;
                height: 45px;
            }
        }

        /* 添加到现有的style标签中 */
video {
    background: transparent !important;
    border-radius: 10px;
    transform: scale(0.95);
    transition: transform 0.3s;
    box-shadow: none !important;
    filter: brightness(2.0) !important; /* 提高亮度到1.8 */
    z-index: 1000 !important;
    position: relative !important;
    max-width: 100%;
    height: auto;
}

video::-webkit-media-controls {
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 5px;
    padding: 5px;
}

video::-webkit-media-controls-panel {
    color: white;
}

/* 媒体查询中的视频样式 */
@media (max-width: 768px) {
    video {
        width: 100%;
        height: auto;
        max-height: 40vh;
        object-fit: contain;
    }
    video {
        pointer-events: auto !important; /* 允许点击事件 */
    }
    .mediaContainer video {
        width: 100%;
        height: auto;
        max-height: 40vh;
        object-fit: contain;
    }
    .mediaContainer video {
        pointer-events: auto !important; /* 允许点击事件 */
    }
}

/* 在style标签中修改或添加以下CSS代码 */

/* 调整视频播放器大小 */
video {
    width: 100% !important; /* 调整为100%以匹配图片宽度 */
     max-height: 80vh !important; /* 增加最大高度限制 */
    object-fit: contain !important;
}

/* 修改放大查看时的视频样式 */
.mediaContainer video {
    width: 100% !important;
    height: 100% !important;
    max-height: 80vh !important;
    object-fit: contain !important;
}

/* 为移动端调整视频尺寸 */
@media (max-width: 768px) {
    video {
        width: 100% !important;
        max-height: 50vh !important;
        pointer-events: auto !important; /* 允许点击事件 */
    }
    
    .mediaContainer video {
        width: 100% !important;
        max-height: 50vh !important;
        pointer-events: auto !important; /* 允许点击事件 */
    }
}

/* 进一步适配更小屏幕 */
@media (max-width: 480px) {
    video {
        width: 100% !important;
        max-height: 40vh !important;
    }
    
    .mediaContainer video {
        width: 100% !important;
        max-height: 40vh !important;
    }
}

/* 系统占用显示器样式 */
.performance-monitor {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: #00ff00;
    padding: 8px;
    border-radius: 5px;
    font-family: monospace;
    font-size: 12px;
    z-index: 1000;
    pointer-events: none;
    text-shadow: 0 0 2px rgba(0, 255, 0, 0.5);
}

/* 更新性能显示器样式 */
.performance-monitor {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.8);
    color: #00ff00;
    padding: 10px;
    border-radius: 5px;
    font-family: monospace;
    font-size: 12px;
    z-index: 1000;
    pointer-events: none;
    text-shadow: 0 0 2px rgba(0, 255, 0, 0.5);
    min-width: 150px;
}

.performance-monitor div {
    margin: 3px 0;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

.performance-monitor span {
    color: #00ff00;
}

/* 添加登录样式 */
/* Login styles have been moved to the CSS section */

/* 登录对话框样式 */
.login-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.login-container {
    background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 20px;
    padding: 30px;
    width: 90%;
    max-width: 400px;
    position: relative;
    animation: fadeInUp 0.5s ease;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
}

.login-container h2 {
    color: #fff;
    text-align: center;
    margin-bottom: 25px;
    font-size: 24px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.login-form input {
    padding: 12px 15px;
    border: none;
    border-radius: 10px;
    background: rgba(255,255,255,0.1);
    color: #fff;
    font-size: 16px;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
}

.login-form input::placeholder {
    color: rgba(255,255,255,0.6);
}

.login-form input:focus {
    outline: none;
    background: rgba(255,255,255,0.15);
    box-shadow: 0 0 15px rgba(255,255,255,0.1);
}

.login-form button {
    padding: 12px;
    border: none;
    border-radius: 10px;
    background: linear-gradient(45deg, #4facfe, #00f2fe);
    color: white;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.login-form button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(79,172,254,0.4);
}

.close-login {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #fff;
    font-size: 24px;
    cursor: pointer;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.close-login:hover {
    background: rgba(255,255,255,0.1);
    transform: rotate(90deg);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 响应式适配 */
@media (max-width: 480px) {
    .login-container {
        padding: 20px;
        width: 85%;
    }
    
    .login-container h2 {
        font-size: 20px;
    }
    
    .login-form input,
    .login-form button {
        padding: 10px;
        font-size: 14px;
    }
}

    </style>
    <title>相册</title>
</head>
<body>
  <div id="snowflakes-container"></div>
    <!-- 星空背景 -->
    <div class="stars"></div>
    
    <!-- 雪花容器 -->
    <div class="snowflakes"></div>

    <!-- 相册首页 -->
    <div class="album-home">
        <h1>欢迎来到相册</h1>
        <div class="thumbnails">
            <img src="img/image (1).jpg" onclick="showGallery(1)">
            <img src="img/image (2).jpg" onclick="showGallery(2)">
            <img src="img/image (3).jpg" onclick="showGallery(3)">
            <img src="img/image (4).jpg" onclick="showGallery(4)">
            <img src="img/image (5).jpg" onclick="showGallery(5)">
            <img src="img/image (6).jpg" onclick="showGallery(6)">
            <img src="img/image (7).jpg" onclick="showGallery(7)">
            <img src="img/image (8).jpg" onclick="showGallery(8)">
            <img src="img/image (9).jpg" onclick="showGallery(9)">
            <img src="img/image (10).jpg" onclick="showGallery(10)">
            <img src="img/image (11).jpg" onclick="showGallery(11)">
        </div>
    </div>

    <!-- 图片移动容器 -->
    <div class="gallery-container" id="gallery-1">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (1).jpg" class="image-item" data-video="videos/video1.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=2676332640.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (2).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=1867964889.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (3).jpg" class="image-item" data-video="videos/video3.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (4).jpg" class="image-item" data-video="videos/video4.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (5).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="https://sharefs.tx.kugou.com/202503070921/965ff45d24a6e60827c2dc6aab085613/v3/b8cf516ee37d2f7410f86e7b83fbfb65/yp/full/ap1000_us0_pi409_s1579596470.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-2">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (11).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (12).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (13).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (14).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-3">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (15).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (6).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (17).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (18).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-4">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (19).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (20).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (21).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (22).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>
    
    <div class="gallery-container" id="gallery-5">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (23).jpg" class="image-item" data-video="videos/video1.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=2676332640.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (24).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="https://sharefs.tx.kugou.com/202503070921/965ff45d24a6e60827c2dc6aab085613/v3/b8cf516ee37d2f7410f86e7b83fbfb65/yp/full/ap1000_us0_pi409_s1579596470.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (25).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (26).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-6">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (27).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (28).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (29).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (30).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-7">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (31).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (32).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (33).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (34).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-8">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (35).jpg" class="image-item" data-video="videos/video1.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=2676332640.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (36).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="https://sharefs.tx.kugou.com/202503070921/965ff45d24a6e60827c2dc6aab085613/v3/b8cf516ee37d2f7410f86e7b83fbfb65/yp/full/ap1000_us0_pi409_s1579596470.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (37).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (38).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-9">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (39).jpg" class="image-item" data-video="videos/video1.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=2676332640.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (40).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="https://sharefs.tx.kugou.com/202503070921/965ff45d24a6e60827c2dc6aab085613/v3/b8cf516ee37d2f7410f86e7b83fbfb65/yp/full/ap1000_us0_pi409_s1579596470.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (41).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (42).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-10">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (43).jpg" class="image-item" data-video="videos/video1.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=2676332640.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (44).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="https://sharefs.tx.kugou.com/202503070921/965ff45d24a6e60827c2dc6aab085613/v3/b8cf516ee37d2f7410f86e7b83fbfb65/yp/full/ap1000_us0_pi409_s1579596470.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (45).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (46).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <div class="gallery-container" id="gallery-11">
        <div class="image-track">
            <div class="image-item-container">
                <img src="img/image (43).jpg" class="image-item" data-video="videos/video1.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=2676332640.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (44).jpg" class="image-item" data-video="videos/video2.mp4">
                <div class="music-player">
                    <audio controls>
                        <source src="https://sharefs.tx.kugou.com/202503070921/965ff45d24a6e60827c2dc6aab085613/v3/b8cf516ee37d2f7410f86e7b83fbfb65/yp/full/ap1000_us0_pi409_s1579596470.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (45).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
            <div class="image-item-container">
                <img src="img/image (46).jpg" class="image-item">
                <div class="music-player">
                    <audio controls>
                        <source src="http://music.163.com/song/media/outer/url?id=YOUR_MUSIC_ID.mp3" type="audio/mpeg">
                    </audio>
                </div>
            </div>
        </div>
    </div>

    <!-- 控制按钮组 -->
    <div class="controls">
        <button onclick="toggleAnimation()">暂停/播放</button>
        <button onclick="speedUp()">加速</button>
        <button onclick="slowDown()">减速</button>
        <button onclick="toggleMusic()">音乐开关</button>
        <button class="back-button" onclick="goBack()">返回相册</button>
    </div>

    <!-- 背景音乐 -->
    <audio id="bgm" loop>
        <source src="http://music.163.com/song/media/outer/url?id=1821888278.mp3" type="audio/mpeg">
    </audio>

    <!-- 系统占用显示器 -->
    <div class="performance-monitor">
        <div>FPS: <span id="fps">0</span></div>
        <div>GPU: <span id="gpu">--</span></div>
        <div>CPU: <span id="cpu">--</span></div>
        <div>内存: <span id="memory">--</span></div>
        <div>网络: <span id="network">--</span></div>
    </div>

    <script>
        const track = document.querySelector('.image-track');
        let isPlaying = true;
        let speed = 15; // 将初始值从30改为15

        function toggleAnimation() {
            isPlaying = !isPlaying;
            // 选择所有可见的轨道
            const visibleTrack = document.querySelector('.gallery-container[style*="display: block"] .image-track');
            if (visibleTrack) {
                visibleTrack.style.animationPlayState = isPlaying ? 'running' : 'paused';
            }
        }

        function speedUp() {
            speed = Math.max(3, speed - 3); // 允许更快的最小速度，从5改为3，步进值从5改为3
            // 选择所有可见的轨道
            const visibleTrack = document.querySelector('.gallery-container[style*="display: block"] .image-track');
            if (visibleTrack) {
                visibleTrack.style.animationDuration = `${speed}s`;
            }
        }

        function slowDown() {
            speed = Math.min(30, speed + 3); // 减小最大速度限制，从60改为30，步进值从5改为3
            // 选择所有可见的轨道
            const visibleTrack = document.querySelector('.gallery-container[style*="display: block"] .image-track');
            if (visibleTrack) {
                visibleTrack.style.animationDuration = `${speed}s`;
            }
        }

        // 动态创建更多星星
        function createStars() {
            const stars = document.querySelector('.stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 3}px;
                    height: ${Math.random() * 3}px;
                    background: rgba(255,255,255,${Math.random()});
                    top: ${Math.random() * 100}%;
                    left: ${Math.random() * 100}%;
                    animation: moveStars ${Math.random() * 80 + 30}s linear infinite;
                `;
                stars.appendChild(star);
            }
        }
        createStars();

        // 动态创建雪花
        function createSnowflakes() {
    const snowflakesContainer = document.querySelector('.snowflakes');
    const snowflakeChars = ['❅', '❆', '❄']; 
    const maxSnowflakes = 80000; // 减少最大雪花数量以提高性能
    
    function createSnowflake() {
        // 如果雪花数量超过限制,则不创建新雪花
        if (snowflakesContainer.children.length >= maxSnowflakes) {
            return;
        }

        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        
        // 随机设置雪花的起始位置和属性
        snowflake.style.left = Math.random() * 800 + '%';
        snowflake.style.top = '-20px';
        snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
        snowflake.style.opacity = Math.random() * 0.8 + 0.2;
        snowflake.innerHTML = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
        snowflake.style.fontSize = Math.random() * 15 + 10 + 'px';
        
        // 添加到容器
        snowflakesContainer.appendChild(snowflake);
    }

    // 每10ms创建一个新雪花
    setInterval(createSnowflake, 10);
}

        // 页面加载完成后启动雪花效果
        window.addEventListener('load', createSnowflakes);

        // 音乐开关功能
        const bgm = document.getElementById('bgm');
        let isMusicPlaying = true; // 默认设置为true

        function toggleMusic() {
            if (isMusicPlaying) {
                bgm.pause();
            } else {
                bgm.play();
            }
            isMusicPlaying = !isMusicPlaying;
        }

        // 修改页面加载时的音乐播放
        window.addEventListener('load', () => {
            // 尝试自动播放背景音乐
            bgm.play().then(() => {
                console.log('背景音乐开始播放');
                isMusicPlaying = true;
            }).catch(error => {
                console.log('自动播放被阻止:', error);
                isMusicPlaying = false;
            });
        });

        // 修改点击图片放大功能的代码部分:
        document.querySelectorAll('.image-item').forEach(item => {
            item.addEventListener('click', (event) => {
                event.stopPropagation();
                
                // 暂停所有音频
                document.querySelectorAll('.music-player audio, .overlay-music-player audio, #bgm').forEach(audio => {
                    audio.pause();
                });

                // 创建遮罩层
                const overlay = document.createElement('div');
                overlay.className = 'overlay';
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                `;

                // 创建关闭按钮
                const closeButton = document.createElement('button');
                closeButton.textContent = '×';
                closeButton.style.cssText = `
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    width: 40px;
                    height: 40px;
                    border: none;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.2);
                    color: white;
                    font-size: 24px;
                    cursor: pointer;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    transition: background 0.3s;
                    z-index: 1001;
                `;
                
                // 创建内容容器
                const contentContainer = document.createElement('div');
                contentContainer.style.cssText = `
                    position: relative;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    width: 90%;
                    max-width: 1200px;
                    height: 90vh;
                    margin: 0 auto;
                `;

                // 创建媒体容器（用于放置图片和视频）
                const mediaContainer = document.createElement('div');
                mediaContainer.style.cssText = `
                    position: relative;
                    display: flex;
                    flex-direction: ${window.innerWidth <= 768 ? 'column' : 'row'};
                    justify-content: center;
                    align-items: center;
                    width: 100%;
                    height: 100%;
                    gap: ${window.innerWidth <= 768 ? '10px' : '20px'};
                `;

                // 创建图片容器
                const imageContainer = document.createElement('div');
                imageContainer.style.cssText = `
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    width: ${window.innerWidth <= 768 ? '100%' : (item.dataset.video ? '45%' : '90%')};
                    height: ${window.innerWidth <= 768 ? 'auto' : '100%'};
                `;

                // 创建放大后的图片
                const enlargedImg = document.createElement('img');
                enlargedImg.src = item.src;
                enlargedImg.style.cssText = `
                    max-width: 100%;
                    max-height: 80vh;
                    object-fit: contain;
                    border-radius: 10px;
                    box-shadow: 0 0 20px rgba(0,0,0,0.5);
                `;
                imageContainer.appendChild(enlargedImg);

                // 在创建视频元素的部分修改代码：
                if (item.dataset.video) {
                    const videoContainer = document.createElement('div');
                    videoContainer.style.cssText = `
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        width: ${window.innerWidth <= 768 ? '100%' : '55%'};
                        height: ${window.innerWidth <= 768 ? 'auto' : '100%'};
                    `;

                    const video = document.createElement('video');
                    video.style.cssText = `
                        width: 100%;
                        max-height: ${window.innerWidth <= 768 ? '40vh' : '80vh'};
                        object-fit: contain;
                        border-radius: 10px;
                        filter: brightness(1.2);
                    `;
                    video.controls = true;
                    video.src = item.dataset.video;
                    video.playsInline = true;
                    video.autoplay = true;
                    
                    // 添加音量控制
                    video.volume = 0.5; // 设置默认音量为50%

                    // 视频加载完成后自动播放并取消静音,同时暂停背景音乐
                    video.addEventListener('loadeddata', () => {
                        // 视频加载完成后，暂停背景音乐
                        const bgm = document.getElementById('bgm');
                        if (bgm && !bgm.paused) {
                            bgm.pause();
                            isMusicPlaying = true; // 记住背景音乐之前的状态
                        }
                        
                        // 尝试自动播放视频
                        video.play().then(() => {
                            video.muted = false;
                        }).catch(error => {
                            console.log('视频自动播放失败:', error);
                        });
                    });

                    videoContainer.appendChild(video);
                    mediaContainer.appendChild(videoContainer);
                    mediaContainer.appendChild(imageContainer);
                } else {
                    // 如果没有视频，只显示图片
                    imageContainer.style.maxWidth = '90%';
                    mediaContainer.appendChild(imageContainer);
                }

                // 添加音乐播放器
                const musicPlayerContainer = document.createElement('div');
                musicPlayerContainer.className = 'overlay-music-player';
                const audio = document.createElement('audio');
                audio.controls = true;
                const source = document.createElement('source');
                
                // 获取原始音乐播放器的音源
                const originalAudio = item.closest('.image-item-container').querySelector('audio source');
                if (originalAudio) {
                    source.src = originalAudio.src;
                    source.type = originalAudio.type;
                    audio.appendChild(source);
                    
                    audio.addEventListener('play', () => {
                        // 只暂停视频,不重置进度
                        const overlayVideo = overlay.querySelector('video');
                        if (overlayVideo && !overlayVideo.paused) {
                            overlayVideo.pause();
                        }
                        
                        // 暂停其他音频
                        document.querySelectorAll('.music-player audio, .overlay-music-player audio').forEach(otherAudio => {
                            if (otherAudio !== audio && !otherAudio.paused) {
                                otherAudio.pause();
                            }
                        });
                        
                        // 暂停背景音乐
                        if (bgm && !bgm.paused) {
                            bgm.pause();
                        }
                    });
                    
                    musicPlayerContainer.style.cssText = `
                        position: absolute;
                        bottom: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: rgba(0, 0, 0, 0.6);
                        padding: 10px;
                        border-radius: 10px;
                        z-index: 1002;
                    `;
                    musicPlayerContainer.appendChild(audio);
                }

                // 将所有元素添加到内容容器
                contentContainer.appendChild(mediaContainer);
                if (originalAudio) {
                    contentContainer.appendChild(musicPlayerContainer);
                }

                // 添加到页面
                overlay.appendChild(closeButton);
                overlay.appendChild(contentContainer);
                document.body.appendChild(overlay);

                // 关闭功能
                closeButton.addEventListener('click', closeOverlay);

                // 点击遮罩层关闭
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        closeOverlay();
                    }
                });

                // ESC键关闭
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        closeOverlay();
                    }
                });

                // 修改媒体容器的点击事件，防止音乐交互
                mediaContainer.addEventListener('click', (e) => {
                    // 阻止事件冒泡，防止触发遮罩层的关闭事件
                    e.stopPropagation();
                    
                    // 如果点击的是视频元素，不执行任何音乐相关的操作
                    if (e.target.tagName === 'VIDEO') {
                        return;
                    }
                });
            });
        });

        // 显示相册功能
        function showGallery(albumNumber) {
            showLoginDialog(albumNumber);
        }

        // 添加登录对话框函数
        function showLoginDialog(albumNumber) {
            const overlay = document.createElement('div');
            overlay.className = 'login-overlay';
            overlay.innerHTML = `
                <div class="login-container">
                    <button class="close-login">&times;</button>
                    <h2>相册 ${albumNumber} 登录</h2>
                    <form class="login-form" onsubmit="return handleLogin(event, ${albumNumber})">
                        <input type="text" placeholder="用户名" required>
                        <input type="password" placeholder="密码" required>
                        <button type="submit">登录</button>
                    </form>
                </div>
            `;

            document.body.appendChild(overlay);

            // 关闭按钮事件
            const closeButton = overlay.querySelector('.close-login');
            closeButton.addEventListener('click', () => {
                document.body.removeChild(overlay);
            });

            // 点击遮罩层关闭
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    document.body.removeChild(overlay);
                }
            });
        }

        // 处理登录验证
        function handleLogin(event, albumNumber) {
            event.preventDefault();
            const form = event.target;
            const username = form.querySelector('input[type="text"]').value;
            const password = form.querySelector('input[type="password"]').value;
            const credentials = albumCredentials[albumNumber];

            if (username === credentials.username && password === credentials.password) {
                // 登录成功，显示相册
                document.body.removeChild(form.closest('.login-overlay'));
                showGalleryContent(albumNumber);
            } else {
                alert('用户名或密码错误！');
            }
            return false;
        }

        // 显示相册内容
        function showGalleryContent(albumNumber) {
            // 隐藏首页
            document.querySelector('.album-home').style.display = 'none';
            
            // 隐藏所有相册
            document.querySelectorAll('.gallery-container').forEach(container => {
                container.style.display = 'none';
            });
            
            // 显示选中的相册
            document.getElementById(`gallery-${albumNumber}`).style.display = 'block';
            
            // 显示控制按钮和返回按钮
            document.querySelector('.controls').style.display = 'flex';
            document.querySelector('.back-button').style.display = 'block';

            // 重置并开始动画
            const track = document.querySelector(`#gallery-${albumNumber} .image-track`);
            if (track) {
                track.style.animation = 'none';
                track.offsetHeight;
                track.style.animation = `slide ${speed}s linear infinite`;
                track.style.animationPlayState = isPlaying ? 'running' : 'paused';
            }
        }

        // 修改返回相册首页功能
        function goBack() {
            // 显示首页
            document.querySelector('.album-home').style.display = 'block';
            
            // 隐藏所有相册
            document.querySelectorAll('.gallery-container').forEach(container => {
                container.style.display = 'none';
            });
            
            // 隐藏控制按钮和返回按钮
            document.querySelector('.controls').style.display = 'none';
            document.querySelector('.back-button').style.display = 'none';
            
            // 暂停所有视频和音频
            document.querySelectorAll('video, .music-player audio, .overlay-music-player audio').forEach(media => {
                media.pause();
                if (media.tagName === 'VIDEO') {
                    media.currentTime = 0;
                }
            });
            
            // 重置音乐播放状态并自动播放背景音乐
            const bgm = document.getElementById('bgm');
            if (bgm) {
                bgm.play().then(() => {
                    isMusicPlaying = true;
                    console.log('背景音乐已开始播放');
                }).catch(error => {
                    console.log('背景音乐自动播放失败:', error);
                    // 如果自动播放失败，仍将状态设置为 true，因为这是用户主动触发的操作
                    isMusicPlaying = true;
                });
            }
        }

        // 添加触摸滑动支持
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            if (Math.abs(swipeDistance) > 50) { // 最小滑动距离
                if (swipeDistance > 0) {
                    slowDown(); // 向右滑动减速
                } else {
                    speedUp(); // 向左滑动加速
                }
            }
        }

        // 优化图片加载
        function lazyLoadImages() {
            const images = document.querySelectorAll('img');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        observer.unobserve(img);
                    }
                });
            });

            images.forEach(img => {
                img.dataset.src = img.src;
                img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'; // 占位图
                imageObserver.observe(img);
            });
        }

        // 页面加载完成后初始化
        window.addEventListener('load', () => {
            lazyLoadImages();
            
            // 检测设备类型
            if ('ontouchstart' in window) {
                document.body.classList.add('touch-device');
            }
            
            // 处理屏幕方向变化
            window.addEventListener('orientationchange', () => {
                setTimeout(() => {
                    // 重新调整布局
                    document.querySelectorAll('.gallery-container').forEach(container => {
                        if (container.style.display === 'block') {
                            container.style.display = 'none';
                            container.offsetHeight; // 强制重排
                            container.style.display = 'block';
                        }
                    });
                }, 100);
            });
        });

        // 找到音乐播放控制部分,修改为:
        document.querySelectorAll('.music-player audio').forEach(audio => {
            const container = audio.closest('.image-item-container');
            
            // 当鼠标进入图片容器时自动播放音乐
            container.addEventListener('mouseenter', () => {
                // 先暂停所有其他音频
                document.querySelectorAll('.music-player audio').forEach(otherAudio => {
                    if (otherAudio !== audio) {
                        otherAudio.pause();
                    }
                });
                // 暂停背景音乐
                const bgm = document.getElementById('bgm');
                if(bgm) {
                    bgm.pause();
                }
                // 播放当前音频
                audio.play().catch(error => {
                    console.log('自动播放被阻止:', error);
                });
            });

            // 当鼠标离开图片容器时暂停音乐
            container.addEventListener('mouseleave', () => {
                audio.pause();
                // 恢复背景音乐(如果之前是开启状态)
                const bgm = document.getElementById('bgm');
                if(bgm && isMusicPlaying) {
                    bgm.play();
                }
            });
            
            // 监听音频播放结束
            audio.addEventListener('ended', () => {
                // 恢复背景音乐(如果之前是开启状态)
                const bgm = document.getElementById('bgm');
                if(bgm && isMusicPlaying) {
                    bgm.play();
                }
            });

            // 添加音频播放开始事件监听
            audio.addEventListener('play', () => {
                // 暂停所有视频播放
                document.querySelectorAll('video').forEach(video => {
                    video.pause();
                    video.currentTime = 0;
                });
            });
        });

        // 同时也需要在视频播放时暂停音乐
        document.querySelectorAll('video').forEach(video => {
            // 移除旧的事件监听器
            video.removeEventListener('play', () => {});
            
            // 添加新的事件监听器
            video.addEventListener('play', () => {
                // 暂停背景音乐
                const bgm = document.getElementById('bgm');
                if (bgm && !bgm.paused) {
                    bgm.pause();
                }
                
                // 暂停所有音频播放器
                document.querySelectorAll('.music-player audio, .overlay-music-player audio').forEach(audio => {
                    if (!audio.paused) {
                        audio.pause();
                    }
                });
            });

            // 视频暂停时不自动恢复背景音乐
            video.addEventListener('pause', () => {
                // 不执行任何操作
            });
        });

        // 修改音频播放事件监听器代码
        document.querySelectorAll('.music-player audio, .overlay-music-player audio').forEach(audio => {
            audio.addEventListener('play', () => {
                // 只暂停视频,不重置进度
                document.querySelectorAll('video').forEach(video => {
                    if (!video.paused) {
                        video.pause();
                    }
                });
                
                // 暂停其他音频
                document.querySelectorAll('.music-player audio, .overlay-music-player audio').forEach(otherAudio => {
                    if (otherAudio !== audio && !otherAudio.paused) {
                        otherAudio.pause(); 
                    }
                });
                
                // 暂停背景音乐
                const bgm = document.getElementById('bgm');
                if (bgm && !bgm.paused) {
                    bgm.pause();
                }
            });
        });

        // 移除移动端点击图片时自动播放音乐的代码
        document.querySelectorAll('.image-item').forEach(item => {
            item.removeEventListener('click', (event) => {
                const audio = item.closest('.image-item-container').querySelector('audio');
                if (audio) {
                    // 暂停其他音频
                    document.querySelectorAll('.music-player audio, .overlay-music-player audio').forEach(otherAudio => {
                        if (otherAudio !== audio && !otherAudio.paused) {
                            otherAudio.pause();
                        }
                    });
                    // 暂停背景音乐
                    const bgm = document.getElementById('bgm');
                    if (bgm && !bgm.paused) {
                        bgm.pause();
                    }
                    // 播放当前音频
                    audio.play().catch(error => {
                        console.log('自动播放被阻止:', error);
                    });
                }
            });
        });

        // 禁用背景音乐的播放事件
        document.getElementById('bgm').addEventListener('play', (event) => {
            const videoPlaying = document.querySelector('video:not([paused])');
            if (videoPlaying) {
                event.preventDefault();
                event.stopPropagation();
                document.getElementById('bgm').pause();
            }
        });

        function closeOverlay() {
            const overlay = document.querySelector('.overlay');
            const video = overlay.querySelector('video');
            const overlayAudio = overlay.querySelector('audio');
            
            if (video) {
                video.pause();
                video.currentTime = 0;
            }
            
            if (overlayAudio) {
                overlayAudio.pause();
            }
            
            overlay.style.opacity = '0';
            setTimeout(() => {
                document.body.removeChild(overlay);
                // 恢复轨道动画
                const track = document.querySelector('.image-track');
                track.style.animationPlayState = 'running';
                
                // 恢复背景音乐（如果之前是播放状态）
                const bgm = document.getElementById('bgm');
                if (bgm && isMusicPlaying) {
                    bgm.play().catch(error => {
                        console.log('背景音乐恢复播放失败:', error);
                    });
                }
            }, 300);
        }

        // 替换现有的performanceMonitor对象
const performanceMonitor = {
    frames: 0,
    lastTime: performance.now(),
    updateInterval: null,

    init() {
        this.fpsElement = document.getElementById('fps');
        this.gpuElement = document.getElementById('gpu');
        this.cpuElement = document.getElementById('cpu');
        this.memoryElement = document.getElementById('memory');
        this.networkElement = document.getElementById('network');

        this.update();
        this.updateSystemInfo();
        
        // 监听窗口状态
        window.addEventListener('blur', () => this.pauseUpdate());
        window.addEventListener('focus', () => this.resumeUpdate());

        // 监听网络状态变化
        window.addEventListener('online', () => this.updateNetworkInfo());
        window.addEventListener('offline', () => this.updateNetworkInfo());
    },

    updateSystemInfo() {
        // 获取系统信息
        this.updateHardwareInfo();
        this.updateNetworkInfo();
        this.updateMemoryInfo();

        // 定期更新
        if (!this.updateInterval) {
            this.updateInterval = setInterval(() => this.updateSystemInfo(), 2000);
        }
    },

    updateHardwareInfo() {
    // GPU 信息
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    if (gl) {
        const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
        if (debugInfo) {
            const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            // 提取显卡型号
            let gpu = 'Unknown';
            if (renderer.includes('NVIDIA')) {
                // NVIDIA 显卡
                const match = renderer.match(/NVIDIA\s+(GeForce\s+[^\s/]+)/i);
                gpu = match ? match[1] : 'NVIDIA';
            } else if (renderer.includes('AMD') || renderer.includes('Radeon')) {
                // AMD 显卡
                const match = renderer.match(/(AMD|Radeon)\s+([^\s/]+)/i);
                gpu = match ? `${match[1]} ${match[2]}` : 'AMD';
            } else if (renderer.includes('Intel')) {
                // Intel 显卡
                const match = renderer.match(/Intel\s+([^\s/]+)/i);
                gpu = match ? `Intel ${match[1]}` : 'Intel';
            }
            this.gpuElement.textContent = gpu;
        } else {
            this.gpuElement.textContent = '未知';
        }
    } else {
        this.gpuElement.textContent = '不支持';
    }

    // CPU 信息
    const cpuCores = navigator.hardwareConcurrency || 'Unknown';
    this.cpuElement.textContent = `${cpuCores}核`;
},

    updateMemoryInfo() {
        if (navigator.deviceMemory) {
            this.memoryElement.textContent = `${navigator.deviceMemory}GB`;
        } else {
            this.memoryElement.textContent = '未知';
        }
    },

    updateNetworkInfo() {
        if (navigator.connection) {
            const conn = navigator.connection;
            const effectiveType = conn.effectiveType || '';
            const downlink = conn.downlink ? `${conn.downlink}Mb/s` : '';
            this.networkElement.textContent = `${effectiveType} ${downlink}`;
        } else {
            this.networkElement.textContent = navigator.onLine ? '在线' : '离线';
        }
    },

    update() {
        if (!this.fpsElement) return;
        
        const now = performance.now();
        this.frames++;
        
        if (now >= this.lastTime + 1000) {
            const fps = Math.round(this.frames * 1000 / (now - this.lastTime));
            this.fpsElement.textContent = fps;
            
            // FPS颜色指示
            if (fps < 30) {
                this.fpsElement.style.color = '#ff4444';
            } else if (fps < 50) {
                this.fpsElement.style.color = '#ffff00';
            } else {
                this.fpsElement.style.color = '#00ff00';
            }
            
            this.frames = 0;
            this.lastTime = now;
        }
        
        requestAnimationFrame(() => this.update());
    },

    pauseUpdate() {
        if (this.updateInterval) {
            clearInterval(this.updateInterval);
            this.updateInterval = null;
        }
    },

    resumeUpdate() {
        this.updateSystemInfo();
    }
};

// 初始化性能监控
window.addEventListener('load', () => {
    performanceMonitor.init();
});

// 清理
window.addEventListener('unload', () => {
    performanceMonitor.pauseUpdate();
});

// 定义每个相册的登录信息
const albumCredentials = {
    1: { username: "user1", password: "pass1" },
    2: { username: "user2", password: "pass2" },
    3: { username: "user3", password: "pass3" },
    4: { username: "user4", password: "pass4" },
    5: { username: "user5", password: "pass5" },
    6: { username: "user6", password: "pass6" },
    7: { username: "user7", password: "pass7" },
    8: { username: "user8", password: "pass8" },
    9: { username: "user9", password: "pass9" },
    10: { username: "user10", password: "pass10" },
    11: { username: "user11", password: "pass11" }
};

// 在<script>标签内修改音频事件监听相关代码:

// 音频暂停时恢复视频播放的函数
function handleAudioPause(audio) {
    // 获取所有带有 data-active 标记的视频
    const activeVideos = document.querySelectorAll('video[data-active="true"]');
    
    activeVideos.forEach(video => {
        // 检查是否有其他音频在播放
        const isAnyAudioPlaying = Array.from(document.querySelectorAll('audio'))
            .some(otherAudio => !otherAudio.paused);
            
        // 如果没有任何音频在播放，则恢复视频播放
        if (!isAnyAudioPlaying) {
            // 尝试恢复视频播放
            video.play().catch(error => {
                console.log('视频恢复播放失败:', error);
            });
        }
    });
}

// 修改音频事件监听器
document.querySelectorAll('.music-player audio, .overlay-music-player audio').forEach(audio => {
    // 播放事件
    audio.addEventListener('play', () => {
        // 查找当前正在播放的视频并标记
        document.querySelectorAll('video').forEach(video => {
            if (!video.paused) {
                video.pause();
                video.dataset.active = "true";
            }
        });
        
        // 暂停其他音频
        document.querySelectorAll('audio').forEach(otherAudio => {
            if (otherAudio !== audio && !otherAudio.paused) {
                otherAudio.pause();
            }
        });
    });

    // 暂停事件
    audio.addEventListener('pause', () => {
        setTimeout(() => handleAudioPause(audio), 100);
    });

    // 播放结束事件
    audio.addEventListener('ended', () => {
        setTimeout(() => handleAudioPause(audio), 100);
    });
});

// 修改视频事件监听器
document.querySelectorAll('video').forEach(video => {
    video.addEventListener('play', () => {
        video.dataset.active = "true";
        
        // 暂停所有音频
        document.querySelectorAll('audio').forEach(audio => {
            if (!audio.paused) {
                audio.pause();
            }
        });
    });
    
    video.addEventListener('pause', () => {
        // 仅在非音频播放导致的暂停时移除标记
        const isAudioPlaying = Array.from(document.querySelectorAll('audio'))
            .some(audio => !audio.paused);
            
        if (!isAudioPlaying) {
            delete video.dataset.active;
        }
    });
    
    video.addEventListener('ended', () => {
        delete video.dataset.active;
    });
});
    </script>
</body>
</html>